[
    {
      "name": "counter_total",
      "comment": "counter_total - подсчет количества",
      "condition": {
          "messageTypeId": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
      },
      "aggregate": [
          {
            "$group": {
              "_id": null,
              "cnt": { "$sum": 1 },
              "sum": { "$sum": "$a" }
            }
          }
        ]
    },
    {
      "name": "counter1_odd",
        "comment": "counter1_odd - нечетные значения f2",
        "condition": {
            "messageTypeId": [1]
        },
        "aggregate": [
            {
              "$match": {
                "a": {"$gte": 1000},
                "f2": { "$nin": ["value2", "value4", "value6", "value8", "value10"] },
              }
            },
            {
              "$group": {
                "_id": null,
                "cnt": { "$sum": 1 },
                "sum": { "$sum": "$a" }
              }
            }
          ]
    },
    {
        "name": "counter2_even",
        "comment": "counter2_even - четные значения f2",
        "condition": {
            "messageTypeId": [1]
        },
        "aggregate": [
            {
              "$match": {
                "a": {"$gte": 1000},
                "f2": { "$in": ["value2", "value4", "value6", "value8", "value10"] },
              }
            },
            {
              "$group": {
                "_id": null,
                "cnt": { "$sum": 1 },
                "sum": { "$sum": "$amount" }
              }
            }
          ]
    },
    {
        "name": "counter3_lte_1000",
        "comment": "counter3_lte_1000 - значения a меньше или равны 1000",
        "condition": {
            "messageTypeId": [2]
        },
        "aggregate": [
            {
              "$match": {
                "a": {"$lte": 1000},
                "f2": "$$f2"
              }
            },
            {
              "$group": {
                "_id": null,
                "cnt": { "$sum": 1 },
                "sum": { "$sum": "$a" }
              }
            }
        ]
    },
    {
      "name": "counter4_gt_1000",
      "comment": "counter4_gt_1000 - значения a больше 1000",
      "condition": {
          "messageTypeId": [2]
      },
      "aggregate": [
          {
            "$match": {
              "a": {"$gt": 1000},
              "f2": "$$f2"
            }
          },
          {
            "$group": {
              "_id": null,
              "cnt": { "$sum": 1 },
              "sum": { "$sum": "$a" }
            }
          }
      ]
  }
]