# MongoDB Performance Testing with FactGenerate

–ü—Ä–æ–µ–∫—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ MongoDB —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ index.js                    # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —ç–∫—Å–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π
‚îú‚îÄ‚îÄ generators/                 # –ö–ª–∞—Å—Å—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ FactGenerate.js        # –ö–ª–∞—Å—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ FactIndexer.js         # –ö–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ –∏–∑ —Ñ–∞–∫—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ MongoFactGenerate.js   # –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MongoDB –∏ –º–∞—Å—Å–æ–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ providers/                  # –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ MongoProvider.js       # –ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MongoDB
‚îú‚îÄ‚îÄ tests/                      # –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ factTest.js            # –¢–µ—Å—Ç—ã –¥–ª—è FactGenerate
‚îÇ   ‚îú‚îÄ‚îÄ factIndexerTest.js     # –¢–µ—Å—Ç—ã –¥–ª—è FactIndexer
‚îÇ   ‚îú‚îÄ‚îÄ mongoFactTest.js       # –¢–µ—Å—Ç—ã –¥–ª—è MongoFactGenerate
‚îÇ   ‚îú‚îÄ‚îÄ mongoFactIndexTest.js # –¢–µ—Å—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω–¥–µ–∫—Å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ MongoDB
‚îÇ   ‚îî‚îÄ‚îÄ loggerTest.js          # –¢–µ—Å—Ç—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è Logger
‚îî‚îÄ‚îÄ examples/                   # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    ‚îú‚îÄ‚îÄ factControllerQuickExample.js # –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è FactController
    ‚îú‚îÄ‚îÄ factIndexerExample.js   # –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è FactIndexer
    ‚îú‚îÄ‚îÄ mongoProviderExample.js # –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è MongoProvider
    ‚îî‚îÄ‚îÄ mongoFactIndexExample.js # –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å –∏–Ω–¥–µ–∫—Å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ MongoDB
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MongoDB —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### FactGenerate - –±–∞–∑–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–∫—Ç–æ–≤

```javascript
const { FactGenerate } = require('./src');
// –∏–ª–∏
const FactGenerate = require('./src/generators/FactGenerate');

const generator = new FactGenerate();
const fromDate = new Date('2024-01-01');
const toDate = new Date('2024-12-31');

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–∫—Ç–∞
const fact = generator.generateFact(1, fromDate, toDate);

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤ –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞
const facts = generator.generateFacts(1000, 2, fromDate, toDate);

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–º–µ—à–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤
const mixedFacts = generator.generateMixedFacts(1000, [1, 2, 3], fromDate, toDate);
```

### FactIndexer - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ —Ñ–∞–∫—Ç–æ–≤

```javascript
const { FactIndexer } = require('./src');
// –∏–ª–∏
const FactIndexer = require('./src/generators/FactIndexer');

const indexer = new FactIndexer();

// –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –æ–¥–Ω–æ–≥–æ —Ñ–∞–∫—Ç–∞
const fact = {
    i: 'test-id-123',
    t: 1,
    a: 100,
    c: new Date('2024-01-01'),
    d: new Date('2024-01-15'),
    f1: 'value1',
    f2: 'value2',
    f5: 'value5'
};

const indexValues = indexer.index(fact);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –º–∞—Å—Å–∏–≤ –∏–∑ 3 –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ–ª–µ–π f1, f2, f5

// –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –º–∞—Å—Å–∏–≤–∞ —Ñ–∞–∫—Ç–æ–≤
const facts = [fact1, fact2, fact3];
const allIndexValues = indexer.indexFacts(facts);

// –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö
console.log(`–í—Å–µ–≥–æ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π: ${allIndexValues.length}`);
```

### MongoFactGenerate - —Ä–∞–±–æ—Ç–∞ —Å MongoDB

```javascript
const { MongoFactGenerate } = require('./src');
// –∏–ª–∏
const MongoFactGenerate = require('./src/generators/MongoFactGenerate');

const mongoGen = new MongoFactGenerate(
    'mongodb://localhost:27017',  // —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    'testDB',                     // –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    'facts'                       // –∏–º—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏
);

async function example() {
    // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
    await mongoGen.connect();
    
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤—Å—Ç–∞–≤–∫–∞ 10000 —Ñ–∞–∫—Ç–æ–≤
    const result = await mongoGen.generateAndInsertFacts(
        10000,                           // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
        [1, 2, 3, 4, 5],                // —Ç–∏–ø—ã —Ñ–∞–∫—Ç–æ–≤
        new Date('2024-01-01'),         // –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞
        new Date('2024-12-31'),         // –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞
        1000,                           // —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞
        800                             // —Ü–µ–ª–µ–≤–æ–π —Ä–∞–∑–º–µ—Ä JSON –¥–æ–∫—É–º–µ–Ω—Ç–∞
    );
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    await mongoGen.getFactsStatistics();
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    await mongoGen.disconnect();
}
```

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ npm —Å–∫—Ä–∏–ø—Ç–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
npm test                # –¢–µ—Å—Ç—ã FactGenerate
npm run test:mongo      # –¢–µ—Å—Ç—ã MongoDB (—Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–π MongoDB)
npm run test:logger     # –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è Logger
npm run example:mongo   # –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è MongoProvider
npm run example:controller # –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–∏–º–µ—Ä FactController
```

### –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫
```bash
node src/tests/factTest.js                # –¢–µ—Å—Ç—ã FactGenerate
node src/tests/factIndexerTest.js         # –¢–µ—Å—Ç—ã FactIndexer
node src/tests/mongoFactTest.js           # –¢–µ—Å—Ç—ã MongoDB
node src/tests/mongoFactIndexTest.js    # –¢–µ—Å—Ç—ã –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ MongoDB
node src/tests/loggerTest.js              # –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è Logger
node src/examples/factControllerQuickExample.js # –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–∏–º–µ—Ä FactController
node src/examples/factIndexerExample.js   # –ü—Ä–∏–º–µ—Ä FactIndexer
node src/examples/mongoProviderExample.js # –ü—Ä–∏–º–µ—Ä MongoProvider
node src/examples/mongoFactIndexExample.js # –ü—Ä–∏–º–µ—Ä –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ MongoDB
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–ö–∞–∂–¥—ã–π —Ñ–∞–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:
- `i` (GUID/ObjectId) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ GUID, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ ObjectId –≤ MongoDB
- `t` (byte) - —Ç–∏–ø —Ñ–∞–∫—Ç–∞ (1-5)
- `a` (double) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (1-1000000)
- `c` (datetime) - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ (—Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞)
- `d` (datetime) - –¥–∞—Ç–∞ —Ñ–∞–∫—Ç–∞ (—Å–ª—É—á–∞–π–Ω–∞—è –¥–∞—Ç–∞ –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ)
- 10 —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–æ–ª–µ–π `f1`-`f23` —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ (2-20 —Å–∏–º–≤–æ–ª–æ–≤)
- `z` (string) - –ø–æ–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ JSON (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

–ö–∞–∂–¥–æ–µ –∏–Ω–¥–µ–∫—Å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- `it` (number) - —Ç–∏–ø –∏–Ω–¥–µ–∫—Å–∞ (–Ω–æ–º–µ—Ä –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª—è fN, –≥–¥–µ N - —á–∏—Å–ª–æ)
- `f` (string) - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è —Ñ–∞–∫—Ç–∞, –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 'f' –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —á–∏—Å–ª–æ (f1, f2, f5, f10, etc.)
- `i` (string) - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∞–∫—Ç–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–∫—Ç–∞
- `t` (number) - —Ç–∏–ø —Ñ–∞–∫—Ç–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–∫—Ç–∞
- `d` (Date) - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ñ–∞–∫—Ç–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–∫—Ç–∞
- `c` (Date) - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è JSON –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–∫—Ç–∞

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –≤ —Ñ–∞–∫—Ç–µ –Ω–µ—Ç –ø–æ–ª–µ–π, –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö—Å—è —Å 'f', –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ FactIndexer

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- `index(fact)` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –æ–¥–Ω–æ–≥–æ —Ñ–∞–∫—Ç–∞
- `indexFacts(facts)` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –º–∞—Å—Å–∏–≤–∞ —Ñ–∞–∫—Ç–æ–≤

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–ª–µ–π, –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö—Å—è —Å 'f' –∏ —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö —á–∏—Å–ª–æ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–∫—Ç–æ–≤ –±–µ–∑ –ø–æ–ª–µ–π fN (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –º–∞—Å—Å–∏–≤–∞ —Ñ–∞–∫—Ç–æ–≤

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ MongoFactGenerate

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- `connect()` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MongoDB
- `disconnect()` - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç MongoDB
- `generateAndInsertFacts()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤—Å—Ç–∞–≤–∫–∞ —Ñ–∞–∫—Ç–æ–≤
- `getFactsCount()` - –ø–æ–¥—Å—á–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- `clearFacts()` - –æ—á–∏—Å—Ç–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- `getFactsStatistics()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º —Ñ–∞–∫—Ç–æ–≤
- `createIndexes()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- `getSampleFacts()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ —Ñ–∞–∫—Ç–æ–≤

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ü–∞–∫–µ—Ç–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ GUID –≤ ObjectId –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤ MongoDB
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è —Ä–∞–∑–º–µ—Ä–∞ JSON –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –ø–æ–ª–µ `z`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –æ—Ç—á–µ—Ç—ã –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ (–≤–∫–ª—é—á–∞—è –∏–Ω–¥–µ–∫—Å –Ω–∞ –ø–æ–ª–µ `i`)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (—Å–∫–æ—Ä–æ—Å—Ç—å –≤—Å—Ç–∞–≤–∫–∏)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Ç–∏–ø–æ–≤ —Ñ–∞–∫—Ç–æ–≤

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MongoDB

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
- –•–æ—Å—Ç: `localhost:27017`
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `factTestDB`
- –ö–æ–ª–ª–µ–∫—Ü–∏—è: `facts`

–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `src/tests/mongoFactTest.js` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥—Ä—É–≥–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.

### MongoProvider - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

```javascript
const { MongoProvider } = require('./src');
// –∏–ª–∏
const MongoProvider = require('./src/providers/MongoProvider');

const provider = new MongoProvider(
    'mongodb://localhost:27017',
    'testDB'
);

async function example() {
    await provider.connect();
    
    // –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
    await provider.createIndexes();
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ö–µ–º—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏
    const schema = await provider.getFactsCollectionSchema();
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
    const isValid = provider.validateFactStructure(factData);
    
    await provider.disconnect();
}
```

### –†–∞–±–æ—Ç–∞ —Å –∏–Ω–¥–µ–∫—Å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ MongoDB

```javascript
const { MongoProvider, FactIndexer, FactGenerate } = require('./src');

const provider = new MongoProvider(
    'mongodb://localhost:27017',
    'testDB'
);
const indexer = new FactIndexer();
const generator = new FactGenerate();

async function indexValuesExample() {
    await provider.connect();
    
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–∫—Ç–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
    const facts = generator.generateFacts(100, 1, fromDate, toDate);
    const indexValues = indexer.indexFacts(facts);
    
    // –í—Å—Ç–∞–≤–∫–∞ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ MongoDB
    await provider.insertIndexValues(indexValues);
    
    // –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ (f: hashed, it: 1, d: 1, i: 1)
    await provider.createIndexValuesIndexes();
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    const stats = await provider.getIndexValuesStats();
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ö–µ–º—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏
    const schema = await provider.getIndexValuesSchema();
    
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤
    const samples = await provider.getSampleIndexValues(5);
    
    await provider.disconnect();
}
```

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã MongoProvider:
- `FACT_COLLECTION_NAME = "facts"` - –∏–º—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –¥–ª—è —Ñ–∞–∫—Ç–æ–≤
- `FACT_INDEX_COLLECTION_NAME = "factIndex"` - –∏–º—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –¥–ª—è –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã MongoProvider:
- `connect()` / `disconnect()` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º
- `createIndexes()` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- `getFactsCollectionSchema()` - –∞–Ω–∞–ª–∏–∑ —Å—Ö–µ–º—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Ñ–∞–∫—Ç–æ–≤
- `validateFactStructure()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–∫—Ç–æ–≤
- `getCollectionStats()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- `ensureConnection()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –†–∞–±–æ—Ç–∞ —Å –∏–Ω–¥–µ–∫—Å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ MongoDB:
- `createIndexValuesIndexes()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- `insertIndexValues()` - –≤—Å—Ç–∞–≤–∫–∞ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ MongoDB
- `getIndexValuesStats()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- `getIndexValuesSchema()` - —Å—Ö–µ–º–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- `getSampleIndexValues()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- `clearIndexValues()` - –æ—á–∏—Å—Ç–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–¢–∏–ø–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:
- 1000-5000 —Ñ–∞–∫—Ç–æ–≤/—Å–µ–∫ –ø—Ä–∏ –ø–∞–∫–µ—Ç–Ω–æ–π –≤—Å—Ç–∞–≤–∫–µ
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞: 500-1000 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ò–Ω–¥–µ–∫—Å—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è—é—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤—ã–±–æ—Ä–∫—É

### –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:
- **–°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å `{f: "hashed", it: 1, d: 1, i: 1}`** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:
  - –ü–æ–∏—Å–∫ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é –ø–æ–ª—è `f` (—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –ø–æ–ª—è `it` (f1, f2, f5, etc.)
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ —Ñ–∞–∫—Ç–∞ `d`
  - –°–≤—è–∑—å —Å –∏—Å—Ö–æ–¥–Ω—ã–º–∏ —Ñ–∞–∫—Ç–∞–º–∏ —á–µ—Ä–µ–∑ `i`

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

1. **MongoDB –Ω–µ –∑–∞–ø—É—â–µ–Ω**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MongoDB —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
2. **–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞
3. **–ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏**: –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –∏–ª–∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–∫—Ç–æ–≤
4. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –∏ —Ä–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [üìñ API Documentation](docs/API.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ –∫–ª–∞—Å—Å–æ–≤
- [üõ†Ô∏è Development Guide](docs/DEVELOPMENT.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞
- [üìã Technical Requirements](Prompt.md) - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- [üîß Logging System](docs/LOGGING.md) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∏—Å—Ç–µ–º–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- [üß™ Logger Testing](docs/LOGGER_TESTING.md) - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
   ```bash
   npm install
   ```

2. **–ó–∞–ø—É—Å–∫ –±–∞–∑–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤:**
   ```bash
   npm test
   ```

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
   ```bash
   npm run test:logger
   ```

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ FactIndexer (—Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π):**
   ```bash
   node src/tests/factIndexerTest.js
   ```

5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å MongoDB** (—Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–π MongoDB):
   ```bash
   npm run test:mongo
   ```

6. **–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∏–º–µ—Ä–æ–≤:**
   ```bash
   npm run example:controller                   # –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–∏–º–µ—Ä FactController
   node src/examples/factIndexerExample.js      # –ü—Ä–∏–º–µ—Ä FactIndexer (–∏–Ω–¥–µ–∫—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
   node src/examples/mongoFactIndexExample.js # –ü—Ä–∏–º–µ—Ä –∏–Ω–¥–µ–∫—Å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ MongoDB
   npm run example:mongo                        # –ü—Ä–∏–º–µ—Ä MongoProvider
   ```
